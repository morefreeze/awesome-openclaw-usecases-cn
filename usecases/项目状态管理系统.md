# 项目状态管理系统：事件驱动的看板替代方案

传统看板是静态的，需要手动更新。你会忘记移动卡片，在会话之间丢失上下文，无法跟踪状态变化背后的"原因"。项目在没有清晰可见性的情况下偏离方向。

这个工作流用一个自动跟踪项目状态的事件驱动系统取代看板：

• 将项目状态存储在带有完整历史记录的数据库中
• 捕获上下文：决策、障碍、下一步、关键见解
• 事件驱动更新："刚完成X，被Y阻塞"→自动状态转换
• 自然语言查询："[项目]的状态是什么？"、"我们为什么在[功能]上转向？"
• 每日站会摘要：昨天发生了什么，今天计划做什么，什么被阻塞
• Git集成：将提交链接到项目事件以实现可追溯性

## 痛点

看板会变得过时。你把时间浪费在更新卡片上，而不是工作上。上下文会丢失——三个月后，你不记得为什么做出关键决策。代码更改和项目进度之间没有自动链接。

## 功能介绍

你不需要拖动卡片，只需与助手聊天："完成了认证流程，开始做仪表板。"系统记录事件，更新项目状态，并保留上下文。当你问"仪表板进展如何？"时，它会告诉你完整的情况：已完成什么，下一步是什么，什么被阻塞，以及为什么。

Git提交会被自动扫描并链接到项目。你的每日站会摘要会自动生成。

## 所需技能

- `postgres`或SQLite用于项目状态数据库
- `github`(gh CLI)用于提交跟踪
- Discord或Telegram用于更新和查询
- Cron作业用于每日摘要
- 子代理用于并行项目分析

## 设置方法

1. 设置项目状态数据库：
```sql
CREATE TABLE projects (
  id SERIAL PRIMARY KEY,
  name TEXT UNIQUE,
  status TEXT, -- 例如，"active", "blocked", "completed"
  current_phase TEXT,
  last_update TIMESTAMPTZ DEFAULT NOW()
);

CREATE TABLE events (
  id SERIAL PRIMARY KEY,
  project_id INTEGER REFERENCES projects(id),
  event_type TEXT, -- 例如，"progress", "blocker", "decision", "pivot"
  description TEXT,
  context TEXT,
  timestamp TIMESTAMPTZ DEFAULT NOW()
);

CREATE TABLE blockers (
  id SERIAL PRIMARY KEY,
  project_id INTEGER REFERENCES projects(id),
  blocker_text TEXT,
  status TEXT DEFAULT 'open', -- "open", "resolved"
  created_at TIMESTAMPTZ DEFAULT NOW(),
  resolved_at TIMESTAMPTZ
);
```

2. 创建一个Discord频道用于项目更新(例如，#project-state)。

3. 提示OpenClaw：
```text
你是我的项目状态管理器。我会用对话的方式告诉你我在做什么，而不是使用看板。

当我说类似这样的话：
- "完成了[任务]" → 记录"progress"事件，更新项目状态
- "被[问题]阻塞" → 创建障碍条目，将项目状态更新为"blocked"
- "开始[新任务]" → 记录"progress"事件，更新当前阶段
- "决定[决策]" → 记录带有完整上下文的"decision"事件
- "转向[新方法]" → 记录带有推理过程的"pivot"事件

当我问：
- "[项目]的状态是什么？" → 获取最新事件、障碍和当前阶段
- "我们为什么决定[X]？" → 搜索事件以获取决策上下文
- "什么阻碍了我们？" → 列出所有项目中的未解决障碍

每天早上9点，运行cron作业：
1. 扫描过去24小时的git提交(通过gh CLI)
2. 根据分支名称或提交消息将提交链接到项目
3. 发布每日站会摘要到Discord #project-state：
   - 昨天发生了什么(事件+提交)
   - 今天计划做什么(基于当前阶段和最近的对话)
   - 什么被阻塞(未解决的障碍)

当我计划sprint时，生成一个子代理来分析每个项目的状态并建议优先级。
```

4. 集成到你的工作流中：只需自然地与助手谈论你正在做的事情。系统会捕获所有内容。

## 相关链接

- [事件溯源模式](https://martinfowler.com/eaaDev/EventSourcing.html)
- [为什么看板对独立开发者不起作用](https://blog.nuclino.com/why-kanban-doesnt-work-for-me)