# 家庭日历聚合与家务助理

现代家庭要处理五个或更多的日历——工作、个人、共享家庭、孩子学校、课外活动——跨越不同的平台和格式。重要事件因为没有单一视图而被遗漏。与此同时，家务协调（购物清单、食品储藏室库存、预约安排）通过分散的短信进行，这些短信会被淹没。

这个用例将OpenClaw变成一个始终在线的家务协调器：将日历聚合到早间简报中，监控消息以获取可操作项，并通过共享聊天界面管理家务后勤。

## 痛点

- **日历碎片化**：工作日历有安全限制，无法共享。学校日历以PDF或手写网站形式出现。夏令营日程在电子邮件中。每天早上手动检查每个日历是不可持续的——“在我忘记之前，跨日历复制事件效果很好，然后就会有一个被遗漏。”
- **家务协调开销**：“我们还有多少牛奶？”需要先检查冰箱，再检查地下室食品储藏室，然后回复短信。一周的购物之旅中要多次这样做。
- **错过预约**：预约确认通过短信发送，但未被处理——没有日历事件，没有驾车时间缓冲，没有提醒。

## 功能介绍

- **早间简报**：将所有家庭日历聚合到单个每日摘要中，通过你偏好的渠道发送
- **环境消息监控**：监视iMessage/短信对话，当检测到预约（牙医确认、会议计划等）时自动创建日历事件
- **驾车时间缓冲**：在检测到的预约前后添加旅行时间块
- **家庭库存**：维护食品储藏室/冰箱物品的实时库存，双方都可以从任何地方查询
- **购物协调**：去重跨食谱的食材，跟踪库存不足的物品，并生成购物清单
- **基于照片的输入**：拍摄学校日历或冰箱内容的照片，代理将其处理为结构化数据

## 所需技能

- 日历API访问（Google Calendar、通过`ical`的Apple Calendar）
- `imessage`技能用于消息监控（仅适用于macOS）
- Telegram或Slack用于共享家庭聊天界面
- 文件系统访问权限用于库存跟踪
- 相机/照片处理用于物理日历的OCR

## 设置方法

### 1. 日历聚合

配置OpenClaw从所有家庭日历源获取数据：

```text
## 日历源

在早间简报（8:00 AM）时：

1. 获取我的Google工作日历（只读OAuth）
2. 获取共享家庭Google日历
3. 获取伴侣的日历（共享视图）
4. 检查~/Documents/school-calendars/是否有新PDF → OCR并提取事件
5. 检查最近的电子邮件中是否有日历附件或活动邀请

编译成单个简报：
- 今日事件（所有日历，按来源颜色编码）
- 未来3天的预览，以查看冲突
- 自昨天以来添加的任何新事件
- 户外活动的天气背景

通过Telegram/Slack家庭频道发送。
```

### 2. 环境消息监控

这是关键的差异化功能——代理被动监视，并在识别到可操作内容时采取行动：

```text
## 消息监控（HEARTBEAT.md）

每15分钟：
1. 检查所有对话中的新iMessage
2. 检测类似预约的模式：
   - "您的预约已确认在..."
   - "我们能在[日期] [时间]见面吗？"
   - "练习改到周六下午3点"
3. 检测到后：
   - 创建包含详细信息的日历事件
   - 在前后添加30分钟驾车缓冲
   - 发送确认到家庭Telegram："已创建：牙医预约，周二下午2点。已添加驾车时间1:30-2:00和3:00-3:30。"
   - 如果与伴侣相关，添加邀请
4. 检测承诺/约定模式：
   - "我会在周五前发送"
   - "我们下周一起吃晚餐"
   → 创建日历预留或提醒
```

### 3. 家庭库存

```text
## 食品储藏室跟踪

维护~/household/inventory.json，包含：
- 物品名称、数量、位置（冰箱/食品储藏室/地下室）
- 最后更新时间戳
- 低库存阈值

更新方法：
- 照片：用户发送冰箱/食品储藏室的照片 → 视觉模型提取物品
- 文本："我们没有鸡蛋了" / "买了2加仑牛奶"
- 收据：购物收据照片 → 更新库存

查询：双方都可以通过Telegram询问：
- "我们有黄油吗？" → 检查库存，回复位置和数量
- "什么东西快用完了？" → 列出低于阈值的物品
- "生成购物清单" → 编译低库存物品 + 任何需要的食谱食材
```

## 关键见解

- **环境 > 主动**：最大的突破是代理在没有被要求的情况下采取行动。在短信中检测到预约并创建带有驾车缓冲的日历事件——“我没有要求它这样做。它只是知道我想要什么。”
- **Mac Mini是理想选择**：这个用例在家庭Mac Mini上运行效果最佳——iMessage集成、Apple Calendar和始终在线的可用性
- 从只读开始：在启用写入操作（创建事件、发送消息）之前，先从日历读取和消息监控开始
- **共享Telegram频道**：让双方都能看到代理在做什么——建立信任并及早发现错误
- **照片输入被低估**：拍摄学校日历PDF或冰箱内容的照片比打字更快——视觉模型处理得很好

## 灵感来源

这个用例结合了几种社区模式：

- **日历聚合**：由HN用户`angiolillo`在[Hacker News讨论](https://news.ycombinator.com/item?id=46872465)中描述，他详细说明了每天早上分别检查工作、个人、家庭和孩子学校日历的痛苦。
- **环境消息监控**：由[Sparkry AI](https://sparkryai.substack.com/p/24-hours-with-openclaw-the-ai-setup)记录——当一位妻子收到牙医预约短信时，OpenClaw自动创建了带有30分钟驾车缓冲的日历事件，无需被要求。也在[OpenClaw Showcase](https://openclaw.ai/showcase)上得到确认，`@theaaron`称基于聊天的日历管理“是我见过的LLM最好的用途之一。”
- **家务协调**：Brandon Wang的[Clawdbot "Linguini"](https://brandon.wang/2026/clawdbot)在家中Mac Mini上运行——处理短信跟进，从照片创建日历事件，跟踪Airbnb价格，处理冰箱库存照片，并通过iMessage和Slack协调家务后勤。
- **食品储藏室跟踪**：多个HN用户讨论了维护家庭库存的价值（和挑战），`dns_snek`指出：“我5秒钟前忘记把东西放在哪里了……这对我来说真的是个大问题，因为我会让东西过期。”

## 相关链接

- [OpenClaw iMessage技能](https://github.com/openclaw/openclaw)
- [Google Calendar API](https://developers.google.com/calendar)
- [Apple Calendar (EventKit)](https://developer.apple.com/documentation/eventkit)
- [OpenClaw Showcase — 日历推荐](https://openclaw.ai/showcase)