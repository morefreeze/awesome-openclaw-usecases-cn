# 语义记忆搜索

OpenClaw的内置记忆系统将所有内容存储为markdown文件——但随着记忆在数周和数月中增长，找到上周二的那个决定变得不可能。没有搜索，只能滚动文件。

这个用例使用[memsearch](https://github.com/zilliztech/memsearch)在OpenClaw现有的markdown记忆文件之上添加**向量驱动的语义搜索**，这样你可以通过含义而不仅仅是关键字立即找到任何过去的记忆。

## 功能介绍

- 使用单个命令将所有OpenClaw markdown记忆文件索引到向量数据库(Milvus)
- 通过含义搜索："我们选择了什么缓存解决方案？"即使没有出现"caching"这个词，也能找到相关记忆
- 混合搜索(密集向量+BM25全文)与RRF重新排名，以获得最佳结果
- SHA-256内容哈希意味着未更改的文件永远不会重新嵌入——零浪费API调用
- 文件监视器在记忆文件更改时自动重新索引，因此索引始终是最新的
- 适用于任何嵌入提供商：OpenAI、Google、Voyage、Ollama，或完全本地(无需API密钥)

## 痛点

OpenClaw的记忆存储为纯markdown文件。这对于可移植性和人类可读性很好，但没有搜索功能。随着你的记忆增长，你要么必须grep文件(仅关键字，错过语义匹配)，要么将整个文件加载到上下文中(在无关内容上浪费令牌)。你需要一种方法来问"我对X的决定是什么？"并获得确切的相关块，无论措辞如何。

## 所需技能

- 不需要OpenClaw技能——memsearch是独立的Python CLI/库
- Python 3.10+，带有pip或uv

## 设置方法

1. 安装memsearch：
```bash
pip install memsearch
```

2. 运行交互式配置向导：
```bash
memsearch config init
```

3. 索引你的OpenClaw记忆目录：
```bash
memsearch index ~/path/to/your/memory/
```

4. 通过含义搜索你的记忆：
```bash
memsearch search "我们选择了什么缓存解决方案？"
```

5. 对于实时同步，启动文件监视器——它会在每次文件更改时自动索引：
```bash
memsearch watch ~/path/to/your/memory/
```

6. 对于完全本地设置(无需API密钥)，安装本地嵌入提供商：
```bash
pip install "memsearch[local]"
memsearch config set embedding.provider local
memsearch index ~/path/to/your/memory/
```

## 关键见解

- **Markdown保持事实来源。**向量索引只是派生缓存——你可以随时使用`memsearch index`重建它。你的记忆文件永远不会被修改。
- **智能重复数据删除节省资金。**每个块由SHA-256内容哈希标识。重新运行`index`仅嵌入新的或更改的内容，因此你可以随时运行它，而不会浪费嵌入API调用。
- **混合搜索优于纯向量搜索。**通过互反排名融合将语义相似性(密集向量)与关键字匹配(BM25)相结合，可以同时捕捉基于含义和精确匹配的查询。

## 相关链接

- [memsearch GitHub](https://github.com/zilliztech/memsearch)——支持此用例的库
- [memsearch文档](https://zilliztech.github.io/memsearch/)——完整CLI参考、Python API和架构
- [OpenClaw](https://github.com/openclaw/openclaw)——启发memsearch的记忆架构
- [Milvus](https://milvus.io/)——向量数据库后端