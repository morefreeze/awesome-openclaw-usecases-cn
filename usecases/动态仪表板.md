# 带子代理生成的动态仪表板

静态仪表板显示的是陈旧数据，需要不断手动更新。你希望跨多个数据源实时查看数据，而无需构建自定义前端或达到 API 速率限制。

这个工作流创建了一个实时仪表板，生成子代理以并行方式获取和处理数据：

• 同时监控多个数据源（API、数据库、GitHub、社交媒体）
• 为每个数据源生成子代理，避免阻塞并分散 API 负载
• 将结果聚合到统一仪表板（文本、HTML 或 Canvas）
• 每隔 N 分钟用新鲜数据更新一次
• 当指标超过阈值时发送警报
• 在数据库中维护历史趋势以进行可视化

## 痛点

构建自定义仪表板需要数周时间。完成时，需求已经变了。按顺序轮询多个 API 速度慢，还会达到速率限制。你现在就需要洞察力，而不是经过一个周末的编码后才得到。

## 功能介绍

你可以用对话的方式定义要监控的内容："跟踪 GitHub stars、Twitter 提及量、Polymarket 交易量和系统健康状况。" OpenClaw 生成子代理以并行方式获取每个数据源，聚合结果，并将格式化的仪表板发送到 Discord 或作为 HTML 文件。更新按 cron 计划自动运行。

示例仪表板部分：
- **GitHub**: stars、forks、未解决问题、最近提交
- **社交媒体**: Twitter 提及量、Reddit 讨论、Discord 活动
- **市场**: Polymarket 交易量、预测趋势
- **系统健康**: CPU、内存、磁盘使用情况、服务状态

## 所需技能

- 生成子代理以进行并行执行
- `github` (gh CLI) 用于 GitHub 指标
- `bird` (Twitter) 用于社交数据
- `web_search` 或 `web_fetch` 用于外部 API
- `postgres` 用于存储历史指标
- Discord 或 Canvas 用于渲染仪表板
- Cron 作业用于计划更新

## 设置方法

1. 设置指标数据库：
```sql
CREATE TABLE metrics (
  id SERIAL PRIMARY KEY,
  source TEXT, -- 例如，"github", "twitter", "polymarket"
  metric_name TEXT,
  metric_value NUMERIC,
  timestamp TIMESTAMPTZ DEFAULT NOW()
);

CREATE TABLE alerts (
  id SERIAL PRIMARY KEY,
  source TEXT,
  condition TEXT,
  threshold NUMERIC,
  last_triggered TIMESTAMPTZ
);
```

2. 为仪表板更新创建一个 Discord 频道（例如，#dashboard）。

3. 提示 OpenClaw：
```text
你是我的动态仪表板管理器。每隔 15 分钟，运行一个 cron 作业来：

1. 并行生成子代理以从以下来源获取数据：
   - GitHub: stars、forks、未解决问题、提交（过去 24 小时）
   - Twitter: "@username" 的提及量、情感分析
   - Polymarket: 跟踪市场的交易量
   - 系统: 通过 shell 命令获取 CPU、内存、磁盘使用情况

2. 每个子代理将结果写入指标数据库。

3. 聚合所有结果并格式化仪表板：

📊 **仪表板更新** — [时间戳]

**GitHub**
- ⭐ Stars: [数量] (+[变化量])
- 🍴 Forks: [数量]
- 🐛 未解决问题: [数量]
- 💻 提交（24 小时）: [数量]

**社交媒体**
- 🐦 Twitter 提及量: [数量]
- 📈 情感: [正面/负面/中性]

**市场**
- 📊 Polymarket 交易量: $[金额]
- 🔥 热门: [市场名称]

**系统健康**
- 💻 CPU: [使用率]%
- 🧠 内存: [使用率]%
- 💾 磁盘: [使用率]%

4. 发布到 Discord #dashboard。

5. 检查警报条件：
   - 如果 GitHub stars 在 1 小时内变化 > 50 → ping 我
   - 如果系统 CPU > 90% → 警报
   - 如果 Twitter 上负面情绪激增 → 通知

将所有指标存储在数据库中以进行历史分析。
```

4. 可选：使用 Canvas 渲染带有图表和图形的 HTML 仪表板。

5. 查询历史数据："显示过去 30 天的 GitHub star 增长情况。"

## 相关链接

- [使用子代理进行并行处理](https://docs.openclaw.ai/subagents)
- [仪表板设计原则](https://www.nngroup.com/articles/dashboard-design/)